# PicView - 高级图片预览器

## 项目介绍

PicView 是一个功能强大的 WPF 图片预览器，支持多种图片格式，具有先进的背景控制系统和通道显示功能。

## 支持的格式

- **标准格式**: JPG, JPEG, PNG, BMP, GIF, TIFF, TIF, ICO
- **高级格式**: TGA, DDS, PSD, WebP

## 主要功能

### 🎨 背景控制系统（核心功能）
- **透明方格背景**: 经典的透明度显示模式
- **纯色背景**: 支持预设颜色和自定义颜色
  - 预设颜色: 白色、黑色、中性灰、浅灰、深灰
  - 色相/亮度滑块调节
  - PS风格颜色选择器
- **图片背景**: 可选择任意图片作为背景
- **窗口透明**: 完全透明的背景效果

### 🖼️ 图片操作
- **多格式加载**: 通过ImageMagick支持各种图片格式
- **图片导航**: 上一张/下一张按钮，支持方向键
- **图片旋转**: 左旋转/右旋转功能
- **另存为**: 支持格式转换保存

### 📊 通道显示
- **RGBA通道**: 专门针对TGA文件的透明通道显示
- **记忆功能**: 记住通道显示状态
- **双击放大**: 双击通道图片可放大查看

### 🔍 搜索集成
- **Everything搜索**: 集成Everything搜索引擎
- **文件系统回退**: 如果Everything不可用，自动切换到文件系统搜索
- **实时搜索**: 支持实时图片文件搜索

### 🎯 用户体验
- **拖拽支持**: 直接拖拽图片文件到窗口
- **缩放控制**: Ctrl+鼠标滚轮缩放
- **键盘快捷键**: 
  - 左右箭头: 切换图片
  - F键: 全屏/窗口模式
  - Esc: 退出全屏

## 技术特性

### 依赖项
- **.NET 8.0**: 现代化的.NET平台
- **ImageMagick.NET**: 强大的图片处理库
- **Extended.Wpf.Toolkit**: 增强的WPF控件
- **Everything SDK**: 快速文件搜索

### 架构设计
- **模块化设计**: 功能分离，易于维护
- **双重回退**: ImageMagick + WPF原生图片支持
- **内存优化**: 适当的图片缓存和释放机制

## 安装和运行

### 前置要求
1. .NET 8.0 Runtime
2. Windows 10/11
3. Everything（可选，用于快速搜索）

### 编译运行
```bash
# 克隆项目
git clone <repository>
cd PicView

# 恢复依赖
dotnet restore

# 编译项目
dotnet build

# 运行程序
dotnet run
```

## 使用说明

### 基本操作
1. **打开图片**: 点击"打开"按钮或拖拽图片到窗口
2. **浏览图片**: 使用导航按钮或方向键切换
3. **调整背景**: 使用背景设置工具栏选择合适的背景

### 背景设置
1. **透明方格**: 适合查看透明图片
2. **纯色背景**: 选择纯色或使用滑块调节
3. **图片背景**: 选择图片文件作为背景
4. **窗口透明**: 背景完全透明

### 通道查看
1. 勾选"显示通道"复选框
2. 右侧面板会显示图片通道信息
3. 双击通道图片可放大查看
4. 对TGA文件会显示Alpha透明通道

### 搜索功能
1. 点击"搜索"按钮打开搜索面板
2. 输入关键词搜索图片文件
3. 回车执行搜索
4. 自动加载搜索结果

## 开发状态

### 已完成功能 ✅
- [x] 基础UI界面
- [x] 多格式图片支持
- [x] 背景控制系统框架
- [x] 导航控制
- [x] 拖拽支持
- [x] Everything搜索集成
- [x] 通道显示框架

### 正在完善 🚧
- [ ] 完整的事件处理实现
- [ ] 图片旋转和保存功能
- [ ] 完整的通道分离显示
- [ ] 色相亮度滑块响应
- [ ] 图片背景选择

### 计划功能 📋
- [ ] 图片批量处理
- [ ] 更多格式支持
- [ ] 插件系统
- [ ] 主题切换

## 项目结构
```
PicView/
├── MainWindow.xaml          # 主界面UI定义
├── MainWindow.xaml.cs       # 主逻辑实现
├── EverythingSearch.cs      # Everything搜索封装
├── App.xaml                 # 应用程序入口
├── PicView.csproj          # 项目文件
└── README.md               # 项目说明
```

## 贡献

欢迎提交Issue和Pull Request来完善这个项目！

## 许可证

此项目使用MIT许可证。 