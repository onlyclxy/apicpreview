<Window x:Class="rustdll.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:rustdll"
        mc:Ignorable="d"
        Title="Rust 动画播放器 - 支持 GIF 和 WebP" Height="600" Width="800"
        WindowStartupLocation="CenterScreen">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- 控制按钮区域 -->
        <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="10" HorizontalAlignment="Center">
            <Button x:Name="LoadGifButton" Content="加载动画" Width="100" Height="30" Margin="5" Click="LoadGif_Click"/>
            <Button x:Name="PlayButton" Content="播放" Width="80" Height="30" Margin="5" Click="Play_Click" IsEnabled="False"/>
            <Button x:Name="PauseButton" Content="暂停" Width="80" Height="30" Margin="5" Click="Pause_Click" IsEnabled="False"/>
            <Button x:Name="StopButton" Content="停止" Width="80" Height="30" Margin="5" Click="Stop_Click" IsEnabled="False"/>
            
            <!-- 新增：帧控制按钮 -->
            <Separator Margin="10,0"/>
            <Button x:Name="ResetButton" Content="重置" Width="60" Height="30" Margin="5" Click="Reset_Click" IsEnabled="False"/>
            <Button x:Name="PrevFrameButton" Content="上一帧" Width="70" Height="30" Margin="5" Click="PrevFrame_Click" IsEnabled="False"/>
            <Button x:Name="NextFrameButton" Content="下一帧" Width="70" Height="30" Margin="5" Click="NextFrame_Click" IsEnabled="False"/>
            
            <!-- 新增：跳转到指定帧 -->
            <StackPanel Orientation="Horizontal" Margin="10,0">
                <TextBlock Text="跳转到:" VerticalAlignment="Center" Margin="5,0"/>
                <TextBox x:Name="FrameIndexTextBox" Width="50" Height="25" VerticalContentAlignment="Center" Margin="2"/>
                <Button x:Name="SeekButton" Content="跳转" Width="50" Height="30" Margin="2" Click="Seek_Click" IsEnabled="False"/>
            </StackPanel>
            
            <TextBlock x:Name="InfoText" VerticalAlignment="Center" Margin="10,0" FontSize="12" Foreground="Gray"/>
        </StackPanel>
        
        <!-- 动画显示区域 -->
        <Border Grid.Row="1" Background="Black" Margin="10">
            <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto" 
                         Background="Black">
                <Image x:Name="GifImage" 
                       HorizontalAlignment="Center" 
                       VerticalAlignment="Center"
                       Stretch="None"/>
            </ScrollViewer>
        </Border>
        
        <!-- 状态栏 -->
        <StatusBar Grid.Row="2">
            <StatusBarItem>
                <TextBlock x:Name="StatusText" Text="准备就绪 - 支持 GIF 和 WebP 动画"/>
            </StatusBarItem>
            <StatusBarItem HorizontalAlignment="Right">
                <StackPanel Orientation="Horizontal">
                    <TextBlock x:Name="FpsText" Text="FPS: 0" Margin="0,0,10,0"/>
                    <TextBlock x:Name="DelayText" Text="延迟: 0ms" Margin="0,0,10,0"/>
                    <TextBlock x:Name="SizeText" Text="大小: 0x0"/>
                </StackPanel>
            </StatusBarItem>
        </StatusBar>
    </Grid>
</Window>
