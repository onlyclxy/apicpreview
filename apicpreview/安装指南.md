# å¤šæ ¼å¼å›¾ç‰‡é¢„è§ˆå™¨ - å®‰è£…æŒ‡å—

## å½“å‰çŠ¶æ€

ç°åœ¨çš„ç¨‹åºå·²ç»å¯ä»¥è¿è¡Œå¹¶æ”¯æŒä»¥ä¸‹æ ¼å¼ï¼š
- âœ… **JPEG (.jpg, .jpeg)** - .NET åŸç”Ÿæ”¯æŒ
- âœ… **PNG (.png)** - .NET åŸç”Ÿæ”¯æŒ  
- âœ… **GIF (.gif)** - .NET åŸç”Ÿæ”¯æŒ
- âœ… **BMP (.bmp)** - .NET åŸç”Ÿæ”¯æŒ
- âœ… **TIFF (.tiff, .tif)** - .NET åŸç”Ÿæ”¯æŒ
- âœ… **ICO (.ico)** - .NET åŸç”Ÿæ”¯æŒ
- âœ… **Aæ–‡ä»¶ (.a)** - è‡ªå®šä¹‰æ”¯æŒ

## æ‰©å±•æ ¼å¼æ”¯æŒ

è¦æ”¯æŒæ›´å¤šæ ¼å¼ï¼Œéœ€è¦å®‰è£…ä»¥ä¸‹NuGetåŒ…ï¼š

### 1. æ”¯æŒ TGA å’Œ DDS æ ¼å¼
**æ¨èåŒ…**: `Pfim`
```
Install-Package Pfim
```
- ä¸“é—¨ç”¨äºTGAå’ŒDDSæ ¼å¼
- æ€§èƒ½ä¼˜ç§€ï¼Œæ¯”å…¶ä»–ç«äº‰è€…å¿«10å€+
- æ”¯æŒå‹ç¼©çš„DDSçº¹ç†

### 2. æ”¯æŒ WebP æ ¼å¼  
**æ¨èåŒ…**: `KGySoft.Drawing`
```
Install-Package KGySoft.Drawing
```
- å¢å¼º.NETçš„å›¾ç‰‡å¤„ç†èƒ½åŠ›
- æ”¯æŒWebPæ ¼å¼
- æä¾›æ›´å¤šå›¾ç‰‡æ“ä½œåŠŸèƒ½

### 3. æ”¯æŒ PSD æ ¼å¼
**æ¨èåŒ…**: `SixLabors.ImageSharp`
```
Install-Package SixLabors.ImageSharp
```
- ç°ä»£åŒ–çš„å›¾ç‰‡å¤„ç†åº“
- æ”¯æŒå¤šç§æ ¼å¼åŒ…æ‹¬PSDï¼ˆåŸºç¡€æ”¯æŒï¼‰
- è·¨å¹³å°æ”¯æŒ

## å®‰è£…æ­¥éª¤

### æ–¹æ³•1ï¼šä½¿ç”¨Visual StudioåŒ…ç®¡ç†å™¨UI
1. åœ¨Visual Studioä¸­å³é”®ç‚¹å‡»é¡¹ç›®
2. é€‰æ‹©"ç®¡ç†NuGetç¨‹åºåŒ…"
3. æœç´¢å¹¶å®‰è£…ä¸Šè¿°åŒ…

### æ–¹æ³•2ï¼šä½¿ç”¨åŒ…ç®¡ç†å™¨æ§åˆ¶å°
1. åœ¨Visual Studioä¸­æ‰“å¼€"å·¥å…·" -> "NuGetåŒ…ç®¡ç†å™¨" -> "åŒ…ç®¡ç†å™¨æ§åˆ¶å°"
2. ä¾æ¬¡è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š
```powershell
Install-Package Pfim
Install-Package KGySoft.Drawing  
Install-Package SixLabors.ImageSharp
```

## å®‰è£…åçš„é…ç½®

å®‰è£…åŒ…åï¼Œéœ€è¦æ›´æ–° `ImageFormatHelper.cs` ä¸­çš„å®ç°ï¼š

### 1. TGA æ ¼å¼æ”¯æŒ (ä½¿ç”¨Pfim)
```csharp
private static Image LoadTgaImage(string filePath)
{
    using (var image = Pfimage.FromFile(filePath))
    {
        PixelFormat format;
        switch (image.Format)
        {
            case ImageFormat.Rgba32:
                format = PixelFormat.Format32bppArgb;
                break;
            case ImageFormat.Rgb24:
                format = PixelFormat.Format24bppRgb;
                break;
            default:
                throw new NotSupportedException($"ä¸æ”¯æŒçš„TGAæ ¼å¼: {image.Format}");
        }

        var handle = GCHandle.Alloc(image.Data, GCHandleType.Pinned);
        try
        {
            var data = Marshal.UnsafeAddrOfPinnedArrayElement(image.Data, 0);
            return new Bitmap(image.Width, image.Height, image.Stride, format, data);
        }
        finally
        {
            handle.Free();
        }
    }
}
```

### 2. WebP æ ¼å¼æ”¯æŒ (ä½¿ç”¨KGySoft.Drawing)
```csharp
private static Image LoadWebPImage(string filePath)
{
    // KGySoft.Drawing é€šè¿‡æ‰©å±•æ”¯æŒ WebP
    return KGySoft.Drawing.BitmapExtensions.ToGdiPBitmap(
        KGySoft.Drawing.BitmapDataFactory.Load(filePath));
}
```

## é¡¹ç›®ç»“æ„
```
apicpreview/
â”œâ”€â”€ Form1.cs                 // ä¸»çª—ä½“
â”œâ”€â”€ Form1.Designer.cs        // çª—ä½“è®¾è®¡å™¨æ–‡ä»¶  
â”œâ”€â”€ ImageFormatHelper.cs     // å›¾ç‰‡æ ¼å¼å¤„ç†åŠ©æ‰‹
â”œâ”€â”€ Program.cs              // ç¨‹åºå…¥å£ç‚¹
â”œâ”€â”€ packages.config         // NuGetåŒ…é…ç½®
â”œâ”€â”€ apicpreview.csproj      // é¡¹ç›®æ–‡ä»¶
â””â”€â”€ å®‰è£…æŒ‡å—.md            // æœ¬æ–‡æ¡£
```

## åŠŸèƒ½ç‰¹æ€§

- ğŸ–¼ï¸ å¤šæ ¼å¼å›¾ç‰‡æ”¯æŒ
- ğŸ” ç¼©æ”¾åŠŸèƒ½ (æ»šè½®/å¿«æ·é”®)
- ğŸ–±ï¸ æ‹–æ‹½ç§»åŠ¨å›¾ç‰‡
- ğŸ“‚ æ‹–æ”¾æ–‡ä»¶æ‰“å¼€
- âŒ¨ï¸ ä¸°å¯Œçš„å¿«æ·é”®æ”¯æŒ
- ğŸ“Š çŠ¶æ€æ æ˜¾ç¤ºå›¾ç‰‡ä¿¡æ¯
- ğŸ¯ å¤šç§è§†å›¾æ¨¡å¼ (é€‚åº”çª—å£/å®é™…å¤§å°ç­‰)
- ğŸ–¥ï¸ å…¨å±æ¨¡å¼ (F11)

## å¿«æ·é”®

- `Ctrl+O`: æ‰“å¼€æ–‡ä»¶
- `Ctrl++`: æ”¾å¤§
- `Ctrl+-`: ç¼©å°  
- `Ctrl+0`: é€‚åº”çª—å£
- `Ctrl+1`: å®é™…å¤§å°
- `F11`: å…¨å±åˆ‡æ¢
- `Esc`: é€€å‡º
- é¼ æ ‡æ»šè½®: ç¼©æ”¾
- æ‹–æ‹½: ç§»åŠ¨å›¾ç‰‡

## æ³¨æ„äº‹é¡¹

1. æŸäº›æ ¼å¼(å¦‚PSD)å¯èƒ½åªèƒ½æ˜¾ç¤ºåˆå¹¶åçš„å›¾åƒ
2. å¤§å‹å›¾ç‰‡æ–‡ä»¶å¯èƒ½éœ€è¦è¾ƒé•¿åŠ è½½æ—¶é—´
3. DDSå‹ç¼©çº¹ç†çš„è§£ç å¯èƒ½éœ€è¦æ›´å¤šå†…å­˜
4. å»ºè®®åœ¨å®‰è£…åŒ…åé‡æ–°ç¼–è¯‘é¡¹ç›® 