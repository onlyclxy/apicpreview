<Window x:Class="ImageViewerWPF.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:xctk="http://schemas.xceed.com/wpf/xaml/toolkit"
        Title="È´òÁ∫ßÂõæÁâáÈ¢ÑËßàÂô®" Height="800" Width="1200"
        WindowState="Maximized"
        AllowDrop="True" Drop="Window_Drop" DragOver="Window_DragOver">
    
    <Window.Resources>
        <!-- ÈÄèÊòéÊñπÊ†ºËÉåÊôØÁîªÂà∑ -->
        <DrawingBrush x:Key="CheckerboardBrush" ViewportUnits="Absolute" Viewport="0,0,20,20" TileMode="Tile">
            <DrawingBrush.Drawing>
                <DrawingGroup>
                    <GeometryDrawing Brush="LightGray">
                        <GeometryDrawing.Geometry>
                            <RectangleGeometry Rect="0,0,10,10"/>
                        </GeometryDrawing.Geometry>
                    </GeometryDrawing>
                    <GeometryDrawing Brush="White">
                        <GeometryDrawing.Geometry>
                            <RectangleGeometry Rect="10,10,10,10"/>
                        </GeometryDrawing.Geometry>
                    </GeometryDrawing>
                    <GeometryDrawing Brush="White">
                        <GeometryDrawing.Geometry>
                            <RectangleGeometry Rect="0,0,10,10"/>
                        </GeometryDrawing.Geometry>
                    </GeometryDrawing>
                    <GeometryDrawing Brush="LightGray">
                        <GeometryDrawing.Geometry>
                            <RectangleGeometry Rect="10,10,10,10"/>
                        </GeometryDrawing.Geometry>
                    </GeometryDrawing>
                </DrawingGroup>
            </DrawingBrush.Drawing>
        </DrawingBrush>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- ËèúÂçïÊ†è -->
        <Menu Grid.Row="0">
            <MenuItem Header="Êñá‰ª∂(_F)">
                <MenuItem Header="ÊâìÂºÄ(_O)..." Click="OpenFile_Click" InputGestureText="Ctrl+O"/>
                <MenuItem Header="Âè¶Â≠ò‰∏∫(_S)..." Click="SaveAsFile_Click" InputGestureText="Ctrl+S"/>
                <Separator/>
                <MenuItem Header="ÈÄÄÂá∫(_X)" Click="Exit_Click" InputGestureText="Alt+F4"/>
            </MenuItem>
            <MenuItem Header="ËßÜÂõæ(_V)">
                <MenuItem Header="ÊîæÂ§ß(_I)" Click="ZoomIn_Click" InputGestureText="Ctrl++"/>
                <MenuItem Header="Áº©Â∞è(_O)" Click="ZoomOut_Click" InputGestureText="Ctrl+-"/>
                <MenuItem Header="ÈÄÇÂ∫îÁ™óÂè£(_F)" Click="FitToWindow_Click" InputGestureText="Ctrl+0"/>
                <MenuItem Header="ÂÆûÈôÖÂ§ßÂ∞è(_A)" Click="ActualSize_Click" InputGestureText="Ctrl+1"/>
                <Separator/>
                <MenuItem Header="ÂÖ®Â±è(_U)" Click="ToggleFullScreen_Click" InputGestureText="F11"/>
            </MenuItem>
            <MenuItem Header="Â∑•ÂÖ∑(_T)">
                <MenuItem Header="ÊóãËΩ¨90¬∞(_R)" Click="RotateRight_Click" InputGestureText="Ctrl+R"/>
                <MenuItem Header="ÊóãËΩ¨-90¬∞(_L)" Click="RotateLeft_Click" InputGestureText="Ctrl+L"/>
                <Separator/>
                <MenuItem Header="ÊòæÁ§∫ÈÄöÈÅì(_C)" IsCheckable="True" x:Name="ShowChannelsMenuItem" 
                         Checked="ShowChannels_Checked" Unchecked="ShowChannels_Unchecked"/>
            </MenuItem>
            <MenuItem Header="Â∏ÆÂä©(_H)">
                <MenuItem Header="ÂÖ≥‰∫é(_A)..." Click="About_Click"/>
            </MenuItem>
        </Menu>

        <!-- ‰∏ªÂ∑•ÂÖ∑Ê†è -->
        <ToolBar Grid.Row="1" ToolBarTray.IsLocked="True">
            <Button Click="OpenFile_Click" ToolTip="ÊâìÂºÄÊñá‰ª∂ (Ctrl+O)" Style="{StaticResource ToolBarButtonStyle}">üìÅ</Button>
            <Button Click="SaveAsFile_Click" ToolTip="Âè¶Â≠ò‰∏∫ (Ctrl+S)" Style="{StaticResource ToolBarButtonStyle}">üíæ</Button>
            <Separator/>
            <Button Click="PreviousImage_Click" ToolTip="‰∏ä‰∏ÄÂº† (‚Üê)" Style="{StaticResource ToolBarButtonStyle}">‚¨Ö</Button>
            <Button Click="NextImage_Click" ToolTip="‰∏ã‰∏ÄÂº† (‚Üí)" Style="{StaticResource ToolBarButtonStyle}">‚û°</Button>
            <Separator/>
            <Button Click="ZoomOut_Click" ToolTip="Áº©Â∞è (Ctrl+-)" Style="{StaticResource ToolBarButtonStyle}">üîç-</Button>
            <TextBox x:Name="ZoomTextBox" Width="50" Text="100%" IsReadOnly="True" VerticalAlignment="Center"/>
            <Button Click="ZoomIn_Click" ToolTip="ÊîæÂ§ß (Ctrl++)" Style="{StaticResource ToolBarButtonStyle}">üîç+</Button>
            <Separator/>
            <Button Click="RotateLeft_Click" ToolTip="ÈÄÜÊó∂ÈíàÊóãËΩ¨ (Ctrl+L)" Style="{StaticResource ToolBarButtonStyle}">‚Ü∂</Button>
            <Button Click="RotateRight_Click" ToolTip="È°∫Êó∂ÈíàÊóãËΩ¨ (Ctrl+R)" Style="{StaticResource ToolBarButtonStyle}">‚Ü∑</Button>
        </ToolBar>

        <!-- ËÉåÊôØÊéßÂà∂Â∑•ÂÖ∑Ê†è -->
        <ToolBar Grid.Row="2" ToolBarTray.IsLocked="True">
            <TextBlock Text="ËÉåÊôØ:" VerticalAlignment="Center" Margin="5,0"/>
            
            <!-- ÈÄèÊòéÊñπÊ†ºËÉåÊôØ -->
            <Button x:Name="CheckerboardButton" Click="SetCheckerboardBackground_Click" 
                    ToolTip="ÈÄèÊòéÊñπÊ†ºËÉåÊôØ" Style="{StaticResource ColorButtonStyle}">
                <Rectangle Fill="{StaticResource CheckerboardBrush}" Width="20" Height="20"/>
            </Button>
            
            <!-- Á∫ØËâ≤ËÉåÊôØÊåâÈíÆ -->
            <Button Click="SetSolidBackground_Click" Tag="White" ToolTip="ÁôΩËâ≤ËÉåÊôØ" 
                    Style="{StaticResource ColorButtonStyle}" Background="White"/>
            <Button Click="SetSolidBackground_Click" Tag="Black" ToolTip="ÈªëËâ≤ËÉåÊôØ" 
                    Style="{StaticResource ColorButtonStyle}" Background="Black"/>
            <Button Click="SetSolidBackground_Click" Tag="Gray" ToolTip="‰∏≠ÊÄßÁÅ∞ËÉåÊôØ" 
                    Style="{StaticResource ColorButtonStyle}" Background="Gray"/>
            <Button Click="SetSolidBackground_Click" Tag="LightGray" ToolTip="ÊµÖÁÅ∞ËÉåÊôØ" 
                    Style="{StaticResource ColorButtonStyle}" Background="LightGray"/>
            <Button Click="SetSolidBackground_Click" Tag="DarkGray" ToolTip="Ê∑±ÁÅ∞ËÉåÊôØ" 
                    Style="{StaticResource ColorButtonStyle}" Background="DarkGray"/>
            
            <Separator/>
            
            <!-- Ëâ≤Áõ∏ÊªëÂùó -->
            <TextBlock Text="Ëâ≤Áõ∏:" VerticalAlignment="Center" Margin="5,0,2,0"/>
            <Slider x:Name="HueSlider" Width="100" Minimum="0" Maximum="360" Value="0" 
                    ValueChanged="HueSlider_ValueChanged" ToolTip="Ë∞ÉÊï¥ËÉåÊôØËâ≤Áõ∏"/>
            
            <!-- ÊòéÂ∫¶ÊªëÂùó -->
            <TextBlock Text="ÊòéÂ∫¶:" VerticalAlignment="Center" Margin="5,0,2,0"/>
            <Slider x:Name="LightnessSlider" Width="100" Minimum="0" Maximum="100" Value="50" 
                    ValueChanged="LightnessSlider_ValueChanged" ToolTip="Ë∞ÉÊï¥ËÉåÊôØÊòéÂ∫¶"/>
            
            <Separator/>
            
            <!-- È¢úËâ≤ÈÄâÊã©Âô® -->
            <xctk:ColorPicker x:Name="BackgroundColorPicker" Width="50" 
                             SelectedColorChanged="BackgroundColorPicker_SelectedColorChanged"
                             ToolTip="ÈÄâÊã©Ëá™ÂÆö‰πâËÉåÊôØÈ¢úËâ≤"/>
            
            <!-- ÂõæÁâáËÉåÊôØ -->
            <Button Click="SelectImageBackground_Click" ToolTip="ÈÄâÊã©ÂõæÁâáËÉåÊôØ" 
                    Style="{StaticResource ToolBarButtonStyle}">üñº</Button>
            <Button Click="UseDefaultImageBackground_Click" ToolTip="‰ΩøÁî®ÈªòËÆ§bg.png" 
                    Style="{StaticResource ToolBarButtonStyle}">üì∑</Button>
            
            <Separator/>
            
            <!-- ÈÄèÊòéËÉåÊôØ -->
            <Button Click="SetTransparentBackground_Click" ToolTip="ÈÄèÊòéËÉåÊôØ" 
                    Style="{StaticResource ToolBarButtonStyle}">‚ö™</Button>
        </ToolBar>

        <!-- ‰∏ªË¶ÅÊòæÁ§∫Âå∫Âüü -->
        <Grid Grid.Row="3">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*" x:Name="ChannelColumn"/>
            </Grid.ColumnDefinitions>

            <!-- ‰∏ªÂõæÁâáÊòæÁ§∫Âå∫Âüü -->
            <Border x:Name="ImageBorder" Grid.Column="0" Background="Gray">
                <ScrollViewer x:Name="ImageScrollViewer" 
                             HorizontalScrollBarVisibility="Auto" 
                             VerticalScrollBarVisibility="Auto"
                             CanContentScroll="True"
                             PanningMode="Both">
                    <Canvas x:Name="ImageCanvas">
                        <Image x:Name="MainImage" Stretch="None" 
                               MouseLeftButtonDown="Image_MouseLeftButtonDown"
                               MouseMove="Image_MouseMove"
                               MouseLeftButtonUp="Image_MouseLeftButtonUp"
                               MouseWheel="Image_MouseWheel"/>
                    </Canvas>
                </ScrollViewer>
            </Border>

            <!-- ÂàÜÈöîÂô® -->
            <GridSplitter Grid.Column="1" Width="5" HorizontalAlignment="Center" 
                         VerticalAlignment="Stretch" Background="DarkGray" 
                         x:Name="ChannelSplitter" Visibility="Collapsed"/>

            <!-- ÈÄöÈÅìÊòæÁ§∫Âå∫Âüü -->
            <Grid Grid.Column="2" x:Name="ChannelPanel" Visibility="Collapsed">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                
                <!-- ÈÄöÈÅìÈÄâÊã© -->
                <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="5">
                    <CheckBox x:Name="ShowRedChannel" Content="Á∫¢Ëâ≤(R)" IsChecked="True" 
                             Checked="ChannelSelection_Changed" Unchecked="ChannelSelection_Changed"/>
                    <CheckBox x:Name="ShowGreenChannel" Content="ÁªøËâ≤(G)" IsChecked="True" Margin="10,0,0,0"
                             Checked="ChannelSelection_Changed" Unchecked="ChannelSelection_Changed"/>
                    <CheckBox x:Name="ShowBlueChannel" Content="ËìùËâ≤(B)" IsChecked="True" Margin="10,0,0,0"
                             Checked="ChannelSelection_Changed" Unchecked="ChannelSelection_Changed"/>
                    <CheckBox x:Name="ShowAlphaChannel" Content="ÈÄèÊòé(A)" IsChecked="True" Margin="10,0,0,0"
                             Checked="ChannelSelection_Changed" Unchecked="ChannelSelection_Changed"/>
                </StackPanel>
                
                <!-- ÈÄöÈÅìÂõæÁâáÁΩëÊ†º -->
                <UniformGrid x:Name="ChannelGrid" Grid.Row="1" Columns="2" Rows="2" Margin="5">
                    <!-- ËøôÈáå‰ºöÂä®ÊÄÅÊ∑ªÂä†ÈÄöÈÅìÂõæÁâá -->
                </UniformGrid>
            </Grid>
        </Grid>

        <!-- Áä∂ÊÄÅÊ†è -->
        <StatusBar Grid.Row="4">
            <StatusBarItem>
                <TextBlock x:Name="StatusText" Text="Â∞±Áª™"/>
            </StatusBarItem>
            <Separator/>
            <StatusBarItem>
                <TextBlock x:Name="FileInfoText" Text=""/>
            </StatusBarItem>
            <Separator/>
            <StatusBarItem>
                <TextBlock x:Name="ImageInfoText" Text=""/>
            </StatusBarItem>
            <Separator/>
            <StatusBarItem>
                <TextBlock x:Name="ZoomInfoText" Text="100%"/>
            </StatusBarItem>
        </StatusBar>
    </Grid>
</Window> 